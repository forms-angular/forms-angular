var fng;!function(e){var t;!function(e){function t(e,t,n,r,a,o,i,s,l){var c=o,d={master:{},fngInvalidRequired:"fng-invalid-required",allowLocationChange:!0};angular.extend(e,i.parsePathFunc()(n.$$path)),e.modelNameDisplay=c.modelNameDisplay||r("titleCase")(e.modelName),t.$broadcast("fngFormLoadStart",e),s.decorateScope(e,s,l,c),l.decorateScope(e,a,l,d),l.fillFormWithBackendSchema(e,s,l,d);for(var u=0;u<c.modelControllers.length;u++)c.modelControllers[u].onBaseCtrlReady&&c.modelControllers[u].onBaseCtrlReady(e)}t.$inject=["$scope","$rootScope","$location","$filter","$uibModal","$data","routingService","formGenerator","recordHandler"],e.BaseCtrl=t}(t=e.controllers||(e.controllers={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(e,t){e.yes=function(){t.close(!0)},e.no=function(){t.close(!1)},e.cancel=function(){t.dismiss("cancel")}}t.$inject=["$scope","$uibModalInstance"],e.SaveChangesModalCtrl=t}(t=e.controllers||(e.controllers={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(e,t,n,r){e.models=[],t.get("/api/models").then(function(t){e.models=t.data},function(){n.path("/404")}),e.newUrl=function(e){return r.buildUrl(e+"/new")},e.listUrl=function(e){return r.buildUrl(e)}}t.$inject=["$scope","$http","$location","routingService"],e.ModelCtrl=t}(t=e.controllers||(e.controllers={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(e,t,n,r,a,o,i){function s(n,r,o){var i,s={};n+="Ctrl",s.$scope=t.modelControllers[r]=e.$new();try{a(n,s),i=e.routing.newRecord?"creating":e.routing.id?"editing":"listing",angular.isObject(s.$scope.contextMenu)&&angular.forEach(s.$scope.contextMenu,function(t){t.divider?o=!0:t[i]&&(o&&(o=!1,e.items.push({divider:!0})),e.items.push(t))})}catch(e){/is not a function, got undefined/.test(e.message)||/\[\$controller:ctrlreg\] The controller with the name/.test(e.message)||console.log("Unable to instantiate "+n+" - "+e.message)}}e.items=[],e.isCollapsed=!0,e.showShortcuts=!1,e.shortcuts=[{key:"?",act:"Show shortcuts"},{key:"/",act:"Jump to search"},{key:"Ctrl+Shift+S",act:"Save the current record"},{key:"Ctrl+Shift+Esc",act:"Cancel changes on the current record"},{key:"Ctrl+Shift+Ins",act:"Create a new record"},{key:"Ctrl+Shift+X",act:"Delete the current record"}],e.markupShortcut=function(e){return'<span class="key">'+e.split("+").join('</span> + <span class="key">')+"</span>"},e.globalShortcuts=function(t){function n(e){var n=document.getElementById(e);n&&(n.disabled||setTimeout(function(){n.click()}),t.preventDefault())}function r(e){var t=(e.target||e.srcElement).tagName;return!("INPUT"==t||"SELECT"==t||"TEXTAREA"==t)}if(191===t.keyCode&&(r(t)||t.ctrlKey&&!t.altKey&&!t.metaKey))if(t.ctrlKey||!t.shiftKey){var a=document.getElementById("searchinput");a&&(a.focus(),t.preventDefault())}else e.showShortcuts=!0;else 83===t.keyCode&&t.ctrlKey&&t.shiftKey&&!t.altKey&&!t.metaKey?n("saveButton"):27===t.keyCode&&(t.ctrlKey&&t.shiftKey&&!t.altKey&&!t.metaKey||e.showShortcuts)?t.ctrlKey&&t.shiftKey&&!t.altKey&&!t.metaKey?n("cancelButton"):e.showShortcuts=!1:45===t.keyCode&&t.ctrlKey&&t.shiftKey&&!t.altKey&&!t.metaKey?n("newButton"):88===t.keyCode&&t.ctrlKey&&t.shiftKey&&t.altKey&&!t.metaKey&&n("deleteButton")},e.css=function(e,t){var n;return n="function"==typeof i[e]?i[e](t):"error text-error"},e.$on("$locationChangeSuccess",function(){if(e.routing=o.parsePathFunc()(n.$$path),e.items=[],e.routing.analyse)e.contextMenu="Report",e.items=[{broadcast:"exportToPDF",text:"PDF"},{broadcast:"exportToCSV",text:"CSV"}];else if(e.routing.modelName){angular.forEach(t.modelControllers,function(e){e.$destroy()}),t.modelControllers=[],t.record={},t.disableFunctions={},t.dataEventFunctions={},delete t.dropDownDisplay,delete t.modelNameDisplay;var a=r("titleCase")(e.routing.modelName,!0),i=!1;s(a,0,i),e.routing.formName&&s(a+r("titleCase")(e.routing.formName,!0),1,i),e.contextMenu=t.dropDownDisplay||t.modelNameDisplay||r("titleCase")(e.routing.modelName,!1)}}),e.doClick=function(t,n){var r=angular.element(n.target),a=e.items[t];if(a.divider||r.parent().hasClass("disabled"))n.preventDefault();else if(a.broadcast)e.$broadcast(a.broadcast);else{var o=a.args||[],i=a.fn;switch(o.length){case 0:i();break;case 1:i(o[0]);break;case 2:i(o[0],o[1]);break;case 3:i(o[0],o[1],o[2]);break;case 4:i(o[0],o[1],o[2],o[3])}}},e.isHidden=function(t){return!!e.items[t].isHidden&&e.items[t].isHidden()},e.isDisabled=function(t){return!!e.items[t].isDisabled&&e.items[t].isDisabled()},e.buildUrl=function(e){return o.buildUrl(e)},e.dropdownClass=function(t){var n=e.items[t],r="";return n.divider?r="divider":e.isDisabled(t)&&(r="disabled"),r}}t.$inject=["$scope","$data","$location","$filter","$controller","routingService","cssFrameworkService"],e.NavCtrl=t}(t=e.controllers||(e.controllers={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(e,t,n,r){var a,o="";a=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),!e}(),e.searchPlaceholder=a?"Ctrl + / to Search":"Search",e.handleKey=function(t){if(27===t.keyCode&&e.searchTarget&&e.searchTarget.length>0)e.searchTarget="";else if(e.results.length>0)switch(t.keyCode){case 38:e.focus>0&&e.setFocus(e.focus-1),"function"==typeof t.preventDefault&&t.preventDefault();break;case 40:e.results.length>e.focus+1&&e.setFocus(e.focus+1),"function"==typeof t.preventDefault&&t.preventDefault();break;case 13:null!=e.focus&&e.selectResult(e.focus)}},e.setFocus=function(t){null!==e.focus&&delete e.results[e.focus].focussed,e.results[t].focussed=!0,e.focus=t},e.selectResult=function(t){var a=e.results[t],o=r.prefix()+"/"+a.resource+"/"+a.id+"/edit";a.resourceTab&&(o+="/"+a.resourceTab),n.url(o)},e.resultClass=function(t){var n="search-result";return e.results&&e.results[t].focussed&&(n+=" focus"),n};var i=function(){e.moreCount=0,e.errorClass="",e.results=[],e.focus=null};e.$watch("searchTarget",function(n){n&&n.length>0?(o=n,t.get("/api/search?q="+n).then(function(t){var r=t.data;o===n&&(e.searchTarget.length>0?(e.results=r.results,e.moreCount=r.moreCount,r.results.length>0&&(e.errorClass="",e.setFocus(0)),e.errorClass=0===e.results.length?"error has-error":""):i())},function(e){console.log("Error in searchbox.js : "+e.data+" (status="+e.status+")")})):i()},!0),e.$on("$routeChangeStart",function(){e.searchTarget=""})}t.$inject=["$scope","$http","$location","routingService"],e.SearchCtrl=t}(t=e.controllers||(e.controllers={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(){return{restrict:"AE",replace:!0,template:'<li ng-show="items.length > 0" class="mcdd" uib-dropdown> <a uib-dropdown-toggle>  {{contextMenu}} <b class="caret"></b> </a> <ul class="uib-dropdown-menu dropdown-menu">  <li ng-repeat="choice in items" ng-hide="isHidden($index)" ng-class="dropdownClass($index)">   <a ng-show="choice.text" class="dropdown-option" ng-href="{{choice.url}}" ng-click="doClick($index, $event)">    {{choice.text}}   </a>  </li> </ul></li>'}}e.modelControllerDropdown=t}(t=e.directives||(e.directives={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(){return{restrict:"E",template:'<div id="display-error" ng-show="errorMessage" ng-class="css(\'rowFluid\')">  <div class="alert alert-error col-lg-offset-3 offset3 col-lg-6 col-xs-12 span6 alert-warning alert-dismissable">    <button type="button" class="close" ng-click="dismissError()">Ã—</button>    <h4>{{alertTitle}}</h4>    <div ng-bind-html="errorMessage"></div>  </div></div>'}}e.errorDisplay=t}(t=e.directives||(e.directives={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(e,t){return{restrict:"E",scope:{dataSrc:"&model"},link:function(n,r,a){var o=a.ref,i=a.form;n.readonly=a.readonly,i=i?i+"/":"",a.text&&a.text.length>0&&(n.text=a.text);var s=n.$parent.$index;n.$watch("dataSrc()",function(r){r&&("undefined"!=typeof s&&angular.isArray(r)&&(r=r[s]),n.link=e.buildUrl(o+"/"+i+r+"/edit"),n.text||t.getListAttributes(o,r).then(function(e){var t=e.data;t.success===!1?n.text=t.err:n.text=t.list},function(e){n.text="Error "+e.status+": "+e.data}))},!0)},template:function(e,t){return t.readonly?'<span class="fng-link">{{text}}</span>':'<a href="{{ link }}" class="fng-link">{{text}}</a>'}}}t.$inject=["routingService","SubmissionsService"],e.fngLink=t}(t=e.directives||(e.directives={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(e,t,r,a,o,i,s,l){return{restrict:"EA",link:function(c,d,u){var f=[],m=n.N,p=function(e,t,n,r,a){function o(){var t;if(angular.isArray(c[e.options]))t={repeat:e.options,value:"option"};else{if(!c[e.options]||!angular.isArray(c[e.options].values))throw new Error("Invalid enumeration setup in field "+e.name);t=angular.isArray(c[e.options].labels)?{repeat:e.options+".values",value:e.options+".values[$index]",label:e.options+".labels[$index]"}:{repeat:e.options+".values",value:e.options+".values[$index]"}}return t}var s;if(!t){var d=(a.model||"record")+".";if(t=d,a.subschema&&e.name.indexOf(".")!==-1){var u=e.name,f=a.subschemaroot,m=u.slice(f.length+1);a.index?(t+=f+"["+a.index+"]."+m,r="f_"+t.slice(d.length).replace(/(\.|\[|\]\.)/g,"-")):(t+=f,a.subkey?(r=t.slice(d.length).replace(/\./g,"-")+"-subkey"+a.subkeyno+"-"+m,t+="[$_arrayOffset_"+f.replace(/\./g,"_")+"_"+a.subkeyno+"]."+m):(t+="[$index]."+m,r=null,s=u.replace(/\./g,"-")))}else t+=e.name}var p,v,h=l.allInputsVars(c,e,a,t,r,s),g=h.common,b=n||e.required?" required":"";switch(e.type){case"select":e.select2?p='<input placeholder="fng-select2 has been removed" readonly>':(g+=e.readonly?"disabled ":"",g+=e.add?" "+e.add+" ":"",p="<select "+g+'class="'+h.formControl.trim()+h.compactClass+h.sizeClassBS2+'" '+b+">",n||(p+="<option></option>"),angular.isArray(e.options)?angular.forEach(e.options,function(e){p+=_.isObject(e)?'<option value="'+(e.val||e.id)+'">'+(e.label||e.text)+"</option>":"<option>"+e+"</option>"}):(v=o(),p+='<option ng-repeat="option in '+v.repeat+'"',p+=v.label?' value="{{'+v.value+'}}"> {{ '+v.label+" }} </option> ":">{{"+v.value+"}}</option> "),p+="</select>");break;case"link":p='<fng-link model="'+t+'" ref="'+e.ref+'"',e.form&&(p+=' form="'+e.form+'"'),e.linkText&&(p+=' text="'+e.linkText+'"'),e.readonly&&(p+=' readonly="true"'),p+="></fng-link>";break;case"radio":p="",g+=b+(e.readonly?" disabled ":" ");var y="vertical"===a.formstyle||"inline"!==a.formstyle&&!e.inlineRadio;if(angular.isArray(e.options))a.subschema&&(g=g.replace('name="','name="{{$index}}-')),angular.forEach(e.options,function(e){p+="<input "+g+'type="radio"',p+=' value="'+e+'">'+e,y&&(p+="<br />")});else{var w=y?"div":"span";a.subschema&&(g=g.replace("$index","$parent.$index").replace('name="','name="{{$parent.$index}}-')),v=o(),p+="<"+w+' ng-repeat="option in '+v.repeat+'"><input '+g+' type="radio" value="{{'+v.value+'}}"> {{',p+=v.label||v.value,p+=" }} </"+w+"> "}break;case"checkbox":g+=b+(e.readonly?" disabled ":" "),p="bs3"===i.framework()?'<div class="checkbox"><input '+g+'type="checkbox"></div>':l.generateSimpleInput(g,e,a);break;default:g+=l.addTextInputMarkup(h,e,b),"textarea"===e.type?(e.rows&&(g+="auto"===e.rows?'msd-elastic="\n" class="ng-animate" ':'rows = "'+e.rows+'" '),"ckEditor"===e.editor&&(g+='ckeditor = "" ',"bs3"===i.framework()&&(h.sizeClassBS3="col-xs-12")),p="<textarea "+g+" />"):p=l.generateSimpleInput(g,e,a)}return l.inputChrome(p,e,a,h)},v=function(e){var t;switch(e){case"horizontal":t="form-horizontal";break;case"vertical":t="";break;case"inline":t="form-inline";break;case"horizontalCompact":t="form-horizontal compact";break;default:t="form-horizontal compact"}return t},h=function(e){var t={before:"",after:""};if("function"==typeof e.containerType)t=e.containerType(e);else switch(e.containerType){case"tab":for(var n=-1,r=0;r<c.tabs.length;r++)if(c.tabs[r].title===e.title){n=r;break}n>=0?(t.before="<uib-tab select=\"updateQueryForTab('"+e.title+'\')" heading="'+e.title+'"',n>0&&(t.before+='active="tabs['+n+'].active"'),t.before+=">",t.after="</uib-tab>"):(t.before="<p>Error!  Tab "+e.title+" not found in tab list</p>",t.after="");break;case"tabset":t.before="<uib-tabset>",t.after="</uib-tabset>";break;case"well":t.before='<div class="well">',e.title&&(t.before+="<h4>"+e.title+"</h4>"),t.after="</div>";break;case"well-large":t.before='<div class="well well-lg well-large">',t.after="</div>";break;case"well-small":t.before='<div class="well well-sm well-small">',t.after="</div>";break;case"fieldset":t.before="<fieldset>",e.title&&(t.before+="<legend>"+e.title+"</legend>"),t.after="</fieldset>";break;case void 0:break;case null:break;case"":break;default:if(t.before='<div class="'+e.containerType+'">',e.title){var a=e.titleTagOrClass||"h4";a.match(/h[1-6]/)?t.before+="<"+a+">"+e.title+"</"+a+">":t.before+='<p class="'+a+'">'+e.title+"</p>"}t.after="</div>"}return t},g=function(e,t){var n=l.fieldChrome(c,e,t),r=n.template;if(e.schema){var a=e.name.replace(/\./g,"_"),o="$_schema_"+a;if(c[o]=e.schema,e.schema)if(e.subkey){e.subkey.path=e.name,c[o+"_subkey"]=e.subkey;for(var s=angular.isArray(e.subkey)?e.subkey:[e.subkey],d=0;d<s.length;d++){var u=h(s[d]);r+=u.before,r+=y(e.schema,null,{subschema:"true",formstyle:t.formstyle,subkey:o+"_subkey",subkeyno:d,subschemaroot:e.name}),r+=u.after}f.push(e)}else t.subschema?console.log("Attempts at supporting deep nesting have been removed - will hopefully be re-introduced at a later date"):(r+='<div class="schema-head">'+e.label,e.unshift&&(r+='<button id="unshift_'+e.id+'_btn" class="add-btn btn btn-default btn-xs btn-mini form-btn" ng-click="unshift(\''+e.name+'\',$event)"><i class="'+l.glyphClass()+'-plus"></i> Add</button>'),r+='</div><div ng-form class="'+("bs2"===i.framework()?"row-fluid ":"")+v(e.formStyle)+'" name="form_'+a+'{{$index}}" class="sub-doc well" id="'+e.id+'List_{{$index}}"  ng-repeat="subDoc in '+(t.model||"record")+"."+e.name+' track by $index">   <div class="'+("bs2"===i.framework()?"row-fluid":"row")+' sub-doc">',e.noRemove&&!e.customSubDoc||(r+='   <div class="sub-doc-btns">',e.customSubDoc&&(r+=e.customSubDoc),e.noRemove||(r+='<button name="remove_'+e.id+'_btn" class="remove-btn btn btn-mini btn-default btn-xs form-btn" ng-click="remove(\''+e.name+'\',$index,$event)"><i class="'+l.glyphClass()+'-minus"></i> Remove</button>'),r+="  </div> "),r+=y(e.schema,!1,{subschema:"true",formstyle:e.formStyle,model:t.model,subschemaroot:e.name}),r+="   </div></div>",e.noAdd&&!e.customFooter||(r+='<div class = "schema-foot">',e.customFooter&&(r+=e.customFooter),e.noAdd||(r+='<button id="add_'+e.id+'_btn" class="add-btn btn btn-default btn-xs btn-mini form-btn" ng-click="add(\''+e.name+'\',$event)"><i class="'+l.glyphClass()+'-plus"></i> Add</button>'),r+="</div>"))}else{var m=l.controlDivClasses(t);if(e.array){if(m.push("fng-array"),"inline"===t.formstyle)throw new Error("Cannot use arrays in an inline form");r+=l.label(c,e,"link"!==e.type,t),r+=l.handleArrayInputAndControlDiv(p(e,"link"===e.type?null:"arrayItem.x",!0,e.id+"_{{$index}}",t),m,e,t)}else r+=l.label(c,e,null,t),t.required&&console.log("*********  Options required - found it ********"),r+=l.handleInputAndControlDiv(p(e,null,t.required,e.id,t),m)}return r+=n.closeTag},b=function(e){e.type=e.type||"text",e.id?("number"==typeof e.id||e.id[0]>=0&&e.id<="9")&&(e.id="_"+e.id):e.id="f_"+e.name.replace(/\./g,"_"),e.label=void 0!==e.label?null===e.label?"":e.label:r("titleCase")(e.name.split(".").slice(-1)[0])},y=function(e,t,a){var o="";if(e)for(var i=0;i<e.length;i++){var s=e[i];0===i&&t&&!a.schema.match(/$_schema_/)&&"object"!=typeof s.add&&(s.add=s.add?" "+s.add+" ":"",s.add.indexOf("ui-date")!==-1||a.noautofocus||s.containerType||(s.add=s.add+"autofocus "));var l=!0;if(s.directive){var u=s.directive,f="<"+u+' model="'+(a.model||"record")+'"',p=d[0];b(s);for(var v=0;v<p.attributes.length;v++){var w=p.attributes[v];switch(w.nodeName){case"class":var k=w.value.replace("ng-scope","");k.length>0&&(f+=' class="'+k+'"');break;case"schema":var x=("bespoke_"+s.name).replace(/\./g,"_");c[x]=angular.copy(s),delete c[x].directive,f+=' schema="'+x+'"';break;default:f+=" "+w.nodeName+'="'+w.value+'"'}}f+=" ";var C=r("camelCase")(s.directive);for(var $ in s)if(s.hasOwnProperty($))switch($){case"directive":break;case"schema":break;case"add":switch(typeof s.add){case"string":f+=" "+s.add;break;case"object":for(var S in s.add)f+=" "+S+'="'+s.add[S].toString().replace(/"/g,"&quot;")+'"';break;default:throw new Error("Invalid add property of type "+typeof s.add+" in directive "+s.name)}break;case C:for(var D in s[$])f+=s.directive+"-"+D+'="'+s[$][D]+'"';break;default:f+=" fng-fld-"+$+'="'+s[$].toString().replace(/"/g,"&quot;")+'"'}for($ in a)a.hasOwnProperty($)&&"$"!==$[0]&&"undefined"!=typeof a[$]&&(f+=" fng-opt-"+$+'="'+a[$].toString().replace(/"/g,"&quot;")+'"');f+='ng-model="'+s.name+'"></'+u+">",o+=f,l=!1}else if(s.containerType){var F=h(s);switch(s.containerType){case"tab":if(m===n.N){m=n.Forced,o+='<uib-tabset active="activeTabNo">';var E=_.findIndex(c.tabs,function(e){return e.active});c.activeTabNo=E>=0?E:0}o+=F.before,o+=y(s.content,null,a),o+=F.after;break;case"tabset":m=n.Y,o+=F.before,o+=y(s.content,null,a),o+=F.after;break;default:o+=F.before,o+=y(s.content,null,a),o+=F.after}l=!1}else if(a.subkey){var N=angular.isArray(c[a.subkey])?c[a.subkey][0].keyList:c[a.subkey].keyList;_.find(N,function(e,t){return c[a.subkey].path+"."+t===s.name})&&(l=!1)}l&&(b(s),o+=g(s,a))}else console.log("Empty array passed to processInstructions"),o="";return o},w=c.$watch(u.schema,function(r){if(r){var i=angular.isArray(r)?r:[r];if(i.length>0){w();var l="",p=u.model||"record",h=c[p];if(h=h||{},!u.subschema&&!u.model||u.forceform){c.topLevelFormName=u.name||"myForm";var g="";for(var b in u)u.hasOwnProperty(b)&&"$"!==b[0]&&["name","formstyle","schema","subschema","model"].indexOf(b)===-1&&(g+=" "+u.$attr[b]+'="'+u[b]+'"');l='<form name="'+c.topLevelFormName+'" class="'+v(u.formstyle)+' novalidate"'+g+">"}else l="";if(h===c.topLevelFormName)throw new Error("Model and Name must be distinct - they are both "+h);if(l+=y(i,!0,u),m===n.Forced&&(l+="</uib-tabset>"),l+=u.subschema?"":"</form>",d.replaceWith(e(l)(c)),f.length>0||a.modelControllers.length>0)var k=c.$watch("phase",function(e){if("ready"===e){k();for(var t=0;t<a.modelControllers.length;t++)a.modelControllers[t].onAllReady&&a.modelControllers[t].onAllReady(c);for(var n=0;n<f.length;n++){for(var r,i,s=f[n],l=angular.isArray(s.subkey)?s.subkey:[s.subkey],d=s.name.split("."),u=h;d.length>1;)u=u[d.shift()]||{};u=u[d[0]]=u[d[0]]||[];for(var m=0;m<l.length;m++){if(l[m].selectFunc){if(!c[l[m].selectFunc]||"function"!=typeof c[l[m].selectFunc])throw new Error("Subkey function "+l[m].selectFunc+" is not properly set up");r=c[l[m].selectFunc](h,s)}else{if(!l[m].keyList)throw new Error("Invalid subkey setup for "+s.name);var p=l[m].keyList;for(r=0;r<u.length;r++){i=!0;for(var v in p)if(p.hasOwnProperty(v)&&u[r][v]!==p[v]&&("undefined"==typeof u[r][v]||!u[r][v].text||u[r][v].text!==p[v])){i=!1;break}if(i)break}if(!i)switch(l[m].onNotFound){case"error":var g="Cannot find matching "+(l[m].title||l[m].path);o(function(){c.showError(g,"Unable to set up form correctly")}),r=-1;break;case"create":default:r=h[s.name].push(p)-1}}c["$_arrayOffset_"+s.name.replace(/\./g,"_")+"_"+m]=r}}}});t.$broadcast("formInputDone"),s.updateDataDependentDisplay&&h&&Object.keys(h).length>0&&s.updateDataDependentDisplay(h,null,!0,c)}}},!0)}}}t.$inject=["$compile","$rootScope","$filter","$data","$timeout","cssFrameworkService","formGenerator","formMarkupHelper"];var n;!function(e){e[e.Y=0]="Y",e[e.N=1]="N",e[e.Forced=2]="Forced"}(n||(n={})),e.formInput=t}(t=e.directives||(e.directives={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(e){return{restrict:"A",templateUrl:"form-button-"+e.framework()+".html"}}t.$inject=["cssFrameworkService"],e.formButtons=t}(t=e.directives||(e.directives={}))}(fng||(fng={}));var fng;!function(e){var t;!function(t){function n(t){return{restrict:"AE",templateUrl:"search-"+t.framework()+".html",controller:e.controllers.SearchCtrl}}n.$inject=["cssFrameworkService"],t.globalSearch=n}(t=e.directives||(e.directives={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(){return function(e){var t=/([\:\-\_]+(.))/g;return e.replace(t,function(e,t,n,r){return r?n.toUpperCase():n})}}e.camelCase=t}(t=e.filters||(e.filters={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(){return function(e,t){return e&&(e=e.replace(/(_|\.)/g," ").replace(/[A-Z]/g," $&").trim().replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}),e=t?e.replace(/\s/g,""):e.replace(/\s{2,}/g," ")),e}}e.titleCase=t}(t=e.filters||(e.filters={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(){function e(e,t,n,r){function a(e){for(var t in e)t===n&&l.push(e[t]),"$parent"===t&&a(e[t])}var o,i,s,l=[],c=[];if(n="addAll"+n,"string"==typeof r)for(o=r.split(" "),i=0;i<o.length;i++)c.push(o[i]);if(a(e),void 0!==t[n]&&"string"==typeof t[n])for(o=t[n].split(" "),i=0;i<o.length;i++)0===o[i].indexOf("class=")?c.push(o[i].substring(6,o[i].length)):l.push(o[i]);return r=c.length>0?' class="'+c.join(" ")+'" ':" ",s=l.length>0?l.join(" ")+" ":"",r+s}this.getAddAllGroupOptions=function(t,n,r){return e(t,n,"Group",r)},this.getAddAllFieldOptions=function(t,n,r){return e(t,n,"Field",r)},this.getAddAllLabelOptions=function(t,n,r){return e(t,n,"Label",r)},this.addAll=function(e,t,n,r){var a="getAddAll"+t+"Options";return this[a](e,r,n)||[]}}e.addAllService=t}(t=e.services||(e.services={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(){var e={framework:"bs3"};return{setOptions:function(t){angular.extend(e,t)},$get:function(){return{framework:function(){return e.framework},setFrameworkForDemoWebsite:function(t){e.framework=t},span:function(t){var n;switch(e.framework){case"bs2":n="span"+Math.floor(t);break;case"bs3":n="col-xs-"+Math.floor(t)}return n},offset:function(t){var n;switch(e.framework){case"bs2":n="offset"+Math.floor(t);break;case"bs3":n="col-lg-offset-"+Math.floor(t)}return n},rowFluid:function(){var t;switch(e.framework){case"bs2":t="row-fluid";break;case"bs3":t="row"}return t}}}}}e.cssFrameworkService=t}(t=e.services||(e.services={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(){var e={record:{},disableFunctions:{},dataEventFunctions:{},modelControllers:[]};return e}e.$data=t}(t=e.services||(e.services={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(e,t){function n(e){var t=e;return l.templateFolder&&(t="/"!==l.templateFolder[l.templateFolder.length-1]?l.templateFolder+"/"+t:l.templateFolder+t),t}function r(e,t,r){void 0===t&&(t=""),t=t||"",angular.forEach(e,function(e){i.when(t+e.route,angular.extend(e.options||{templateUrl:n(e.templateUrl)},r))}),l.variantsForDemoWebsite&&angular.forEach(l.variantsForDemoWebsite,function(a){angular.forEach(e,function(e){i.when(t+a+e.route,angular.extend(e.options||{templateUrl:n(e.templateUrl)},r))})})}function a(e,t,n){void 0===t&&(t=""),t=t||"",angular.forEach(e,function(e){s.state(e.state,angular.extend(e.options||{url:t+e.route,templateUrl:e.templateUrl},n))})}function o(e,t,n,r,a,o){var i,s=r?"/"+r:"",l=e+"/"+n,c=o?"/"+o:"";switch(t){case"list":i=l+s;break;case"edit":i=l+s+"/"+a+"/edit"+c;break;case"new":i=l+s+"/new"+c}return i}var i,s,l={hashPrefix:"",html5Mode:!1,routing:"ngroute",prefix:""},c=[{route:"/analyse/:model/:reportSchemaName",state:"analyse::model::report",templateUrl:"base-analysis.html"},{route:"/analyse/:model",state:"analyse::model",templateUrl:"base-analysis.html"},{route:"/:model/:id/edit",state:"model::edit",templateUrl:"base-edit.html"},{route:"/:model/:id/edit/:tab",state:"model::edit::tab",templateUrl:"base-edit.html"},{route:"/:model/new",state:"model::new",templateUrl:"base-edit.html"},{route:"/:model",state:"model::list",templateUrl:"base-list.html"},{route:"/:model/:form/:id/edit",state:"model::form::edit",templateUrl:"base-edit.html"},{route:"/:model/:form/:id/edit/:tab",state:"model::form::edit::tab",templateUrl:"base-edit.html"},{route:"/:model/:form/new",state:"model::form::new",templateUrl:"base-edit.html"},{route:"/:model/:form",state:"model::form::list",templateUrl:"base-list.html"}],d=null,u={};return{start:function(n){switch(angular.extend(l,n),l.prefix[0]&&"/"!==l.prefix[0]&&(l.prefix="/"+l.prefix),t.html5Mode(l.html5Mode),""!==l.hashPrefix?t.hashPrefix(l.hashPrefix):l.html5Mode||t.hashPrefix(""),l.routing){case"ngroute":i=e.get("$routeProvider"),l.fixedRoutes&&r(l.fixedRoutes),r(c,l.prefix,n.add2fngRoutes);break;case"uirouter":s=e.get("$stateProvider"),l.fixedRoutes&&a(l.fixedRoutes),a(c,l.prefix,n.add2fngRoutes)}},$get:function(){return{router:function(){return l.routing},prefix:function(){return l.prefix},parsePathFunc:function(){return function(e){if(e!==d){d=e,u={newRecord:!1},l.prefix.length>0&&0===e.indexOf(l.prefix)&&(e=e.slice(l.prefix.length));var t=e.split("/");l.variants&&l.variants.indexOf(t[1])!==-1&&(u.variant=t[1],t.shift());var n=t.length;if("analyse"===t[1])u.analyse=!0,u.modelName=t[2],u.reportSchemaName=n>=4?t[3]:null;else{u.modelName=t[1];var r,a=[t[n-1],t[n-2]],o=a.indexOf("new");o===-1?(r=a.indexOf("edit"),r!==-1&&(n-=2+r,u.id=t[n])):(u.newRecord=!0,n-=1+o),1!==r&&1!==o||(u.tab=a[0]),n>2&&(u.formName=t[2])}}return u}},buildUrl:function(e){var t=l.html5Mode?"":"#";return t+=l.hashPrefix,t+=l.prefix,t[0]&&(t+="/"),t+="/"===e[0]?e.slice(1):e},buildOperationUrl:function(e,t,n,r,a){return o(l.prefix,e,t,n,r,a)},redirectTo:function(){return function(e,t,n,r,a){n.search()&&n.url(n.path());var i=o(l.prefix,e,t.modelName,t.formName,r,a);n.path(i)}}}}}}t.$inject=["$injector","$locationProvider"],e.routingService=t}(t=e.services||(e.services={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(e,t,n,r,a,o){function i(e,t,n,r,a,o,l,f){function p(e,t){var n=angular.copy(e),r=_.find(l.tabs,function(e){return e.title===n});if(!r){if(0===l.tabs.length&&l.formSchema.length>0){l.tabs.push({title:"Main",content:[],active:"Main"===l.tab||!l.tab}),r=l.tabs[0];for(var a=0;a<l.formSchema.length;a++)r.content.push(l.formSchema[a])}r=l.tabs[l.tabs.push({title:n,containerType:"tab",content:[],active:n===l.tab})-1]}r.content.push(t)}for(var v in t)if("_id"===v)r&&t._id.options&&t._id.options.list&&d(r,t._id.options.list,v);else if(t.hasOwnProperty(v)){var h=t[v],g=h.options||{},b=g.form||{};if(h.schema&&!b.hidden){if(o&&n){var y=[];i("Nested "+v,h.schema,y,null,v+".",!0,l,f);var w=c(v,b,a);w.schema=y,b.tab&&p(b.tab,w),void 0!==b.order?n.splice(b.order,0,w):n.push(w)}}else{if(n&&!b.hidden){var k=c(v,b,a);if(m(k.showIf,k.name,l)&&"options"!==v){var x=s(k,h,g,l,f);x.tab&&p(x.tab,x),void 0!==b.order?n.splice(b.order,0,x):n.push(x)}}r&&g.list&&d(r,g.list,v)}}r&&0===r.length&&u(e,r,n,t)}function s(e,t,r,a,s){function l(){e.options=o.suffixCleanId(e,"Options"),e.ids=o.suffixCleanId(e,"_ids"),e.hidden||o.setUpSelectOptions(r.ref,e,a,s,i)}if(t.caster&&(e.array=!0,t=t.caster,angular.extend(r,t.options),t.options&&t.options.form&&angular.extend(e,t.options.form)),"String"===t.instance)r.enum?(e.type=e.type||"select",e.select2?console.log("support for fng-select2 has been removed in 0.8.3 - please convert to fng-ui-select"):(e.options=o.suffixCleanId(e,"Options"),a[e.options]=r.enum)):(e.type||(e.type=e.name.toLowerCase().indexOf("password")!==-1?"password":"text"),r.match&&(e.add='pattern="'+r.match+'" '+(e.add||"")));else if("ObjectID"===t.instance)e.ref=r.ref,e.link&&e.link.linkOnly?(e.type="link",e.linkText=e.link.text,e.form=e.link.form,delete e.link):(e.type="select",e.select2||r.form&&r.form.select2?console.log("support for fng-select2 has been removed in 0.8.3 - please convert to fng-ui-select"):e.directive&&e[n("camelCase")(e.directive)]&&e[n("camelCase")(e.directive)].fngAjax||l());else if("Date"===t.instance)e.type||(e.readonly?e.type="text":(e.type="text",e.add=e.add||"",e.add+=" ui-date ui-date-format "));else if("boolean"===t.instance.toLowerCase())e.type="checkbox";else{if("Number"!==t.instance)throw new Error("Field "+e.name+" is of unsupported type "+t.instance);e.type="number",void 0!==r.min&&(e.add='min="'+r.min+'" '+(e.add||"")),void 0!==r.max&&(e.add='max="'+r.max+'" '+(e.add||"")),e.step&&(e.add='step="'+e.step+'" '+(e.add||""))}return r.required&&(e.required=!0),r.readonly&&(e.readonly=!0),e}function l(e,t){for(var n=e.split("."),r=t.record,a=0,o=n.length;a<o;a++)r[n[a]]||(a===o-1?r[n[a]]=[]:r[n[a]]={}),r=r[n[a]];return r}var c=function(e,t,n){return t.name=n+e,t},d=function(e,t,n){"object"==typeof t?(t.name=n,e.push(t)):e.push({name:n})},u=function(e,t,n,r){if(n){for(var a=0,o=n.length;a<o;a++)if("text"===n[a].type){t.push({name:n[a].name});break}0===t.length&&0!==n.length&&t.push({name:n[0].name})}if(0===t.length){for(var i in r)if("_id"!==i&&r.hasOwnProperty(i)){t.push({name:i});break}if(0===t.length)throw new Error("Unable to generate a title for "+e)}},f=function(e,t){function n(e){var n=e;if("string"==typeof e&&"$"===e.slice(0,1)){var r=e.split(".");switch(r.length){case 1:n=o.getListData(t,e.slice(1));break;case 2:n=o.getListData(t,r[1]);break;default:throw new Error("Unsupported showIf format")}}return n}var r,a=n(e.lhs),i=n(e.rhs);switch(e.comp){case"eq":r=a===i;break;case"ne":r=a!==i;break;default:throw new Error("Unsupported comparator "+e.comp)}return r},m=function(e,t,n){function r(e){if("string"==typeof e&&"$"===e.slice(0,1)){var r=e.slice(1),o=n.dataDependencies[r]||[];o.push(t),n.dataDependencies[r]=o,a+=1}}var a=0,o=!0;return e&&(r(e.lhs),r(e.rhs),0!==a||f(e,void 0)||(o=!1)),o};return{generateEditUrl:function(e,t){return a.buildUrl(t.modelName+"/"+(t.formName?t.formName+"/":"")+e._id+"/edit")},generateNewUrl:function(e){return a.buildUrl(e.modelName+"/"+(e.formName?e.formName+"/":"")+"new")},handleFieldType:s,handleSchema:i,updateDataDependentDisplay:function(e,t,n,r){var a,o,i,s,l,c;for(var d in r.dataDependencies)if(r.dataDependencies.hasOwnProperty(d)){var u=d.split(".");if(1===u.length){
if(n||!t||e[d]!==t[d])for(a=r.dataDependencies[d],o=0;o<a.length;o+=1){var m=a[o];for(i=0;i<r.formSchema.length;i+=1)r.formSchema[i].name===m&&(l=angular.element(document.querySelector("#cg_"+r.formSchema[i].id)),f(r.formSchema[i].showIf,e)?l.removeClass("ng-hide"):l.addClass("ng-hide"))}}else{if(2!==u.length)throw new Error("You can only go down one level of subdocument with showIf");if(void 0===c&&(c=!0),e[u[0]])for(s=0;s<e[u[0]].length;s++)if(n||!t||!t[u[0]]||!t[u[0]][s]||e[u[0]][s][u[1]]!==t[u[0]][s][u[1]])for(a=r.dataDependencies[d],o=0;o<a.length;o+=1){var p=a[o].split(".");if(2!==p.length)throw new Error("Conditional display must control dependent fields at same level ");for(i=0;i<r.formSchema.length;i+=1)if(r.formSchema[i].name===p[0])for(var v=r.formSchema[i].schema,h=0;h<v.length;h++)v[h].name===a[o]&&(l=angular.element(document.querySelector("#f_"+p[0]+"List_"+s+" #cg_f_"+a[o].replace(".","_"))),0===l.length?l=angular.element(document.querySelector("#f_elements-"+s+"-"+p[1])):c=!1,l.length>0&&(f(r.formSchema[i].schema[h].showIf,e[u[0]][s])?l.show():l.hide()))}}}return c},add:function(e,t,n){var r=l(e,n);r.push({}),n.setFormDirty(t)},unshift:function(e,t,n){var r=l(e,n);r.unshift({}),n.setFormDirty(t)},remove:function(e,t,n,r){for(var a=e.split("."),o=r.record,i=0,s=a.length;i<s;i++)o=o[a[i]];o.splice(t,1),r.setFormDirty(n)},hasError:function(e,t,n,r){var a=!1;if(r){var o=r[r.topLevelFormName];if("null"!==e&&(o=o[e.replace("$index",n)]),o){var i=o[t];i&&i.$invalid&&(i.$dirty?a=!0:angular.forEach(i.$validators,function(e,t){"required"!==t&&i.$error[t]&&(a=!0)}))}}else console.log("hasError called with no scope! ",e,t,n);return a},decorateScope:function(e,t,n,r){e.record=r.record,e.phase="init",e.disableFunctions=r.disableFunctions,e.dataEventFunctions=r.dataEventFunctions,e.topLevelFormName=void 0,e.formSchema=[],e.tabs=[],e.listSchema=[],e.recordList=[],e.dataDependencies={},e.conversions={},e.pageSize=60,e.pagesLoaded=0,r.baseScope=e,e.generateEditUrl=function(n){return t.generateEditUrl(n,e)},e.generateNewUrl=function(){return t.generateNewUrl(e)},e.scrollTheList=function(){return n.scrollTheList(e)},e.getListData=function(t,r){return n.getListData(t,r,e.listSchema)},e.setPristine=function(t){t&&e.dismissError(),e[e.topLevelFormName]&&e[e.topLevelFormName].$setPristine()},e.skipCols=function(e){return e>0?"col-md-offset-3":""},e.setFormDirty=function(e){if(e){var t=angular.element(e.target).inheritedData("$formController");t.$setDirty()}else console.log("setFormDirty called without an event (fine in a unit test)")},e.add=function(n,r){return t.add(n,r,e)},e.hasError=function(n,r,a){return t.hasError(n,r,a,e)},e.unshift=function(n,r){return t.unshift(n,r,e)},e.remove=function(n,r,a){return t.remove(n,r,a,e)},e.baseSchema=function(){return e.tabs.length?e.tabs:e.formSchema}}}}e.formGenerator=t,t.$inject=["$location","$timeout","$filter","SubmissionsService","routingService","recordHandler"]}(t=e.services||(e.services={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(e,t,n){function r(e,t){function n(e){var n=e;if("string"==typeof e)if("$"===e.slice(0,1)){n=(t||"record")+".";var r=e.slice(1).split(".");if(r.length>1){var a=r.pop();n+=r.join(".")+"[$index]."+a}else n+=e.slice(1)}else n="'"+e+"'";return n}var r=["eq","ne","gt","gte","lt","lte"],a=["===","!==",">",">=","<","<="],o=r.indexOf(e.comp);if(o===-1)throw new Error("Invalid comparison in showWhen");return n(e.lhs)+a[o]+n(e.rhs)}function a(){return"bs2"===e.framework()?"icon":"glyphicon glyphicon"}var o=function(e){return!e||"undefined"===e||["vertical","inline"].indexOf(e)===-1};return{isHorizontalStyle:o,fieldChrome:function(a,i,s){var l="",c="",d="",u="";if(i.showWhen=i.showWhen||i.showwhen,i.showWhen&&(u+="string"==typeof i.showWhen?'ng-show="'+i.showWhen+'"':'ng-show="'+r(i.showWhen,s.model)+'"'),u+=' id="cg_'+i.id.replace(/\./g,"-")+'"',"bs3"===e.framework()){l="form-group","vertical"===s.formstyle&&"block-level"!==i.size&&(c+='<div class="row">',l+=" col-sm-"+t.sizeAsNumber(i.size),d+="</div>");var f,m=null,p=i.name.split(".");s&&"undefined"!=typeof s.subkeyno?f=s.subschemaroot.replace(/\./g,"-")+"-subkey"+s.subkeyno+"-"+p[p.length-1]:s.subschema?(m="form_"+p.slice(0,-1).join("_")+"$index",f=i.name.replace(/\./g,"-")):f="f_"+i.name.replace(/\./g,"_"),c+="<div"+n.addAll(a,"Group",l,s)+" ng-class=\"{'has-error': hasError('"+m+"','"+f+"', $index)}\"",d+="</div>"}else o(s.formstyle)?(c+="<div"+n.addAll(a,"Group","control-group",s),d="</div>"):(c+="<span ",d="</span>");return c+=(u||"")+">",{template:c,closeTag:d}},label:function(t,r,i,s){var l="";if("bs3"===e.framework()||"inline"!==s.formstyle&&""!==r.label||i){l="<label";var c="control-label";o(s.formstyle)?(l+=' for="'+r.id+'"',"undefined"!=typeof r.labelDefaultClass?c+=" "+r.labelDefaultClass:"bs3"===e.framework()&&(c+=" col-sm-3")):"inline"===s.formstyle&&(l+=' for="'+r.id+'"',c+=" sr-only"),l+=n.addAll(t,"Label",null,s)+' class="'+c+'">'+r.label,i&&(l+=' <i id="add_'+r.id+'" ng-click="add(\''+r.name+'\',$event)" class="'+a()+'-plus-sign"></i>'),l+="</label>"}return l},glyphClass:a,allInputsVars:function(r,a,o,i,s,l){var c,d=a.placeHolder,u="",f="",m="",p="";return"bs3"===e.framework()?(u=["horizontal","vertical","inline"].indexOf(o.formstyle)===-1?" input-sm":"",f="col-sm-"+t.sizeAsNumber(a.size),p=" form-control"):m=a.size?" input-"+a.size:"","inline"===o.formstyle&&(d=d||a.label),c='ng-model="'+i+'"'+(s?' id="'+s+'" name="'+s+'" ':' name="'+l+'" '),c+=d?'placeholder="'+d+'" ':"",a.popup&&(c+='title="'+a.popup+'" '),c+=n.addAll(r,"Field",null,o),{common:c,sizeClassBS3:f,sizeClassBS2:m,compactClass:u,formControl:p}},inputChrome:function(t,n,r,a){return"bs3"===e.framework()&&o(r.formstyle)&&"checkbox"!==n.type&&(t='<div class="bs3-input '+a.sizeClassBS3+'">'+t+"</div>"),n.helpInline&&(t+='<span class="'+("bs2"===e.framework()?"help-inline":"help-block")+'">'+n.helpInline+"</span>"),t+='<div ng-if="'+(r.name||"myForm")+"."+n.id+'.$dirty" class="help-block"> <div ng-messages="'+(r.name||"myForm")+"."+n.id+'.$error">  <div ng-messages-include="error-messages.html">  </div> </div></div>',n.help&&(t+='<span class="help-block">'+n.help+"</span>"),t},generateSimpleInput:function(t,n,r){var a="<input "+t+'type="'+n.type+'"';return"inline"!==r.formstyle||"bs2"!==e.framework()||n.size||(a+='class="input-small"'),a+=" />"},controlDivClasses:function(t){var n=[];return o(t.formstyle)&&n.push("bs2"===e.framework()?"controls":"col-sm-9"),n},handleInputAndControlDiv:function(e,t){return t.length>0&&(e='<div class="'+t.join(" ")+'">'+e+"</div>"),e},handleArrayInputAndControlDiv:function(t,n,r,o){var i="<div ";return"bs3"===e.framework()&&(i+='ng-class="skipCols($index)" '),i+='class="'+n.join(" ")+'" id="'+r.id+'List" ',i+='ng-repeat="arrayItem in '+(o.model||"record")+"."+r.name+' track by $index">',i+=t,"link"!==r.type&&(i+="<i ng-click=\"remove('"+r.name+'\',$index,$event)" id="remove_'+r.id+'_{{$index}}" class="'+a()+'-minus-sign"></i>'),i+="</div>"},addTextInputMarkup:function(e,t,n){var r="",a=e.formControl.trim()+e.compactClass+e.sizeClassBS2+(t.class?" "+t.class:"");return 0!==a.length&&(r+='class="'+a+'"'),t.add&&(r+=" "+t.add+" "),r+=n+(t.readonly?" readonly":"")+" "}}}t.$inject=["cssFrameworkService","inputSizeHelper","addAllService"],e.formMarkupHelper=t}(t=e.services||(e.services={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(){var e=[1,2,4,6,8,10,12],t=["mini","small","medium","large","xlarge","xxlarge","block-level"],n=2;return{sizeMapping:e,sizeDescriptions:t,defaultSizeOffset:n,sizeAsNumber:function(r){return e[r?t.indexOf(r):n]}}}e.inputSizeHelper=t}(t=e.services||(e.services={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(e){return{extractFromAttr:function(e,t){function n(e){var t=e.replace(/&quot;/g,'"');return"true"===t?t=!0:"false"===t?t=!1:!isNaN(parseFloat(t))&&isFinite(t)&&(t=parseFloat(t)),t}var r={},a={formStyle:e.formstyle},o={},i=t?t.length:0;for(var s in e)e.hasOwnProperty(s)&&("fngFld"===s.slice(0,6)?r[s.slice(6).toLowerCase()]=n(e[s]):"fngOpt"===s.slice(0,6)?a[s.slice(6).toLowerCase()]=n(e[s]):t&&s.slice(0,i)===t&&(o[s.slice(i).toLowerCase()]=n(e[s])));return{info:r,options:a,directiveOptions:o}},buildInputMarkup:function(t,n,r,a,o,i,s){var l,c,d,u=e.fieldChrome(t,r,a,' id="cg_'+r.id+'"'),f=e.controlDivClasses(a),m=u.template+e.label(t,r,o,a);if(o?(l="arrayItem"+(i?".x":""),c=r.id+"_{{$index}}",d=r.name+"_{{$index}}"):(l=n+"."+r.name,c=r.id,d=r.name),a.subschema&&r.name.indexOf(".")!==-1){var p=n+".",v=r.name,h=a.subschemaroot,g=v.slice(h.length+1);l=p,a.index?(l+=h+"["+a.index+"]."+g,c="f_"+l.slice(p.length).replace(/(\.|\[|\]\.)/g,"-")):(l+=h,a.subkey?(c=l.slice(p.length).replace(/\./g,"-")+"-subkey"+a.subkeyno+"-"+g,l+="[$_arrayOffset_"+h.replace(/\./g,"_")+"_"+a.subkeyno+"]."+g):(l+="[$index]."+g,c=null,d=v.replace(/\./g,"-")))}var b=e.allInputsVars(t,r,a,l,c,d);return b.modelString=l,m+=e["handle"+(o?"Array":"")+"InputAndControlDiv"](e.inputChrome(s(b),r,a,b),f,r,a),m+=u.closeTag},findIdInSchemaAndFlagNeedX:function e(t,n){for(var r=!1,a=0;a<t.length;a++){var o=t[a];if(o.id===n){o.needsX=!0,r=!0;break}if(o.schema&&e(o.schema,n)){r=!0;break}}return r}}}t.$inject=["formMarkupHelper"],e.pluginHelper=t}(t=e.services||(e.services={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(e,t,n,r,a,o,i,s){function l(e){var t=e.split("."),n=[t[0]];return t.length>1&&n.push(t.slice(1).join(".")),n}function c(e,t,n){var r=l(e);if(r.length>1)d(r[1],t[r[0]],n);else if(t[r[0]]){var a=t[r[0]];if(angular.isArray(a))for(var o=a.length-1;o>=0;o--){var i=typeof a[o];("undefined"===i||"object"===i&&0===Object.keys(a[o]).length)&&a.splice(o,1)}t[r[0]]=n(a)}}function d(e,t,n){if(void 0!==t)if(angular.isArray(t))for(var r=0;r<t.length;r++)c(e,t[r],n);else c(e,t,n)}function u(e,t,n){var r=e.conversions;return n&&(r=r[n]||{}),r[t]}function f(e,t,n,r){if(e.array){for(var a=[],o=!e.directive||x(e),i=0;i<t.length;i++){var s=t[i];s&&s.x&&(s=s.x);var l=D(s,r,n,e.name);o&&(l={x:l}),a.push(l)}return a}return e.select2?{id:t,text:D(t,r,n,e.name)}:D(t,r,n,e.name)}function m(e,t,n,r){if(e.array){for(var a=[],o=0;o<t.length;o++)a.push($(t[o],n,r,e.name));return a}return $(t,n,r,e.name)}function p(e,n,r,a,o){var i=!n.id&&!n.newRecord;if(r.handleSchema("Main "+n.modelName,e,i?null:n.formSchema,n.listSchema,"",!0,n,o),i)o.allowLocationChange=!0;else{var s=!0;if(n.newRecord||(n.dropConversionWatcher=n.$watchCollection("conversions",function(e,t){e!==t&&n.originalData&&F(n.originalData,n,o)})),n.$watch("record",function(e,t){e!==t&&(Object.keys(t).length>0&&n.dropConversionWatcher&&(n.dropConversionWatcher(),n.dropConversionWatcher=null),s=r.updateDataDependentDisplay(e,t,s,n))},!0),n.id)"function"==typeof n.dataEventFunctions.onBeforeRead?n.dataEventFunctions.onBeforeRead(n.id,function(e){e?n.showError(e):a.readRecord(n,o)}):a.readRecord(n,o);else{if(o.master={},t.$$search.r)try{o.master=JSON.parse(t.$$search.r)}catch(e){console.log("Error parsing specified record : "+e.message)}n.phase="ready",n.cancel()}}}function v(e){return function(t){if([200,400].indexOf(t.status)!==-1){var n="";for(var a in t.data.errors)if(t.data.errors.hasOwnProperty(a)){switch(n+="<li><b>"+r("titleCase")(a)+": </b> ",t.data.errors[a].type){case"enum":n+="You need to select from the list of values";break;default:n+=t.data.errors[a].message}n+="</li>"}n=n.length>0?t.data.message+"<br /><ul>"+n+"</ul>":t.data.message||"Error!  Sorry - No further details available.",e.showError(n)}else e.showError(t.status+" "+JSON.stringify(t.data))}}var h=function(e,t){return(e.id||"f_"+e.name).replace(/\./g,"_")+t},g=function(e,t,n){for(var r=t.split("."),a=r.length-1,o=e,i=0;i<a;i++){if(o=angular.isArray(o)?_.map(o,function(e){return e[r[i]]}):o[r[i]],angular.isArray(o)&&"undefined"!=typeof n)if(n.scope&&"function"==typeof n.scope)o=o[n.scope().$index];else{if("number"!=typeof n)throw new Error("Unsupported element type in walkTree "+t);o=o[n]}if(!o)break}return{lastObject:o,key:o?r[a]:void 0}},b=function(e,t,n,r){var a=g(e,t,n);if(a.lastObject&&a.key)if(angular.isArray(a.lastObject))for(var o=0;o<a.lastObject.length;o++)a.lastObject[o][a.key]=r[o];else a.lastObject[a.key]=r},y=function(e,t,n){var r,a=g(e,t,n);return a.lastObject&&a.key&&(r=angular.isArray(a.lastObject)?_.map(a.lastObject,function(e){return e[a.key]}):a.lastObject[a.key]),r},w=function(e,t,n){if(!t.topLevelFormName||t[t.topLevelFormName].$pristine){c(e.name,n.master,function(n){return f(e,n,t[h(e,"Options")],t[h(e,"_ids")])});var r=y(n.master,e.name);r&&b(t.record,e.name,void 0,r)}},k=function(e,t,n){void 0===n&&(n=null);for(var r=t.split("."),a=0;a<r.length;a++)void 0!==e&&null!==e&&(e=e[r[a]]);if(void 0===e&&(e=""),e&&n){var o=_.find(n,function(e){return e.name===t});if(o)switch(o.params){case"timestamp":var i=e.toString().substring(0,8),s=new Date(1e3*parseInt(i,16));e=s.toLocaleDateString()+" "+s.toLocaleTimeString()}}return e},x=function(e){var t=!1;return"text"===e.type?t=!0:(e.needsX||"select"===e.type&&!e.ids&&!e.directive)&&(t=!0),t},C=function(e,t,n,r,a,o,i){o=o||t;for(var s=0;s<e.length;s++){var l=e[s],c=l.name.slice(n),d=y(t,c);if(l.schema){if(d)for(var m=0;m<d.length;m++)d[m]=C(l.schema,d[m],n+1+c.length,r,c,o,m)}else{var p=k(t,c);if(l.array&&x(l)&&p)for(var v=0;v<p.length;v++)p[v]={x:p[v]};var g=r[h(l,"_ids")],w=void 0;if(d&&g&&g.length>0){if(c.indexOf(".")!==-1)throw new Error("Trying to directly assign to a nested field 332");t[c]=f(l,d,r[h(l,"Options")],g)}else l.select2?(console.log("fng-select2 is deprecated - use fng-ui-select instead"),void l.select2):d&&(w=u(r,c,a))&&w.fngajax&&!w.noconvert&&w.fngajax(d,l,function(e,t){b(o,e.name,i,t),S(angular.element("#"+e.id),function(){b(r.record,e.name,i,t)})})}}return t},$=function(e,t,n,r){var a=_.isObject(e)?e.x||e.text:e;if(a&&a.match(/^[0-9a-f]{24}$/))return a;var o=t.indexOf(a);if(o===-1)throw new Error("convertListValueToId: Invalid data - value "+a+" not found in "+t+" processing "+r);return n[o]},S=function(e,t){var n=e.inheritedData("$ngModelController"),r=n&&n.$pristine;r&&(n.$pristine=!1),t(),r&&(n.$pristine=!0)},D=function(e,t,n,r){var a=t.indexOf(e);if(a===-1)throw new Error("convertIdToListValue: Invalid data - id "+e+" not found in "+t+" processing "+r);return n[a]},F=function(e,t,n){n.master=C(t.formSchema,e,0,t),t.phase="ready",t.cancel()};return{readRecord:function(e,n){i.readRecord(e.modelName,e.id).then(function(r){var a=r.data;a.success===!1&&t.path("/404"),n.allowLocationChange=!1,e.phase="reading","function"==typeof e.dataEventFunctions.onAfterRead&&e.dataEventFunctions.onAfterRead(a),e.originalData=a,F(a,e,n)},e.handleHttpError)},scrollTheList:function(e){var n=e.pagesLoaded;i.getPagedAndFilteredList(e.modelName,{aggregate:t.$$search.a,find:t.$$search.f,limit:e.pageSize,skip:n*e.pageSize,order:t.$$search.o}).then(function(t){var r=t.data;angular.isArray(r)?n===e.pagesLoaded?(e.pagesLoaded++,e.recordList=e.recordList.concat(r)):console.log("DEBUG: infinite scroll component asked for a page twice"):e.showError(r,"Invalid query")},e.handleHttpError)},deleteRecord:function(e,n,r,a){i.deleteRecord(e,n).then(function(){"function"==typeof r.dataEventFunctions.onAfterDelete&&r.dataEventFunctions.onAfterDelete(a.master),o.redirectTo()("list",r,t)})},updateDocument:function(e,t,r,a){r.phase="updating",i.updateRecord(r.modelName,r.id,e).then(function(e){var o=e.data;o.success!==!1?("function"==typeof r.dataEventFunctions.onAfterUpdate&&r.dataEventFunctions.onAfterUpdate(o,a.master),t.redirect?(t.allowChange&&(a.allowLocationChange=!0),n.location=t.redirect):(F(o,r,a),r.setPristine(!1))):r.showError(o)},r.handleHttpError)},createNew:function(e,r,a){i.createRecord(a.modelName,e).then(function(e){var i=e.data;i.success!==!1?("function"==typeof a.dataEventFunctions.onAfterCreate&&a.dataEventFunctions.onAfterCreate(i),r.redirect?n.location=r.redirect:o.redirectTo()("edit",a,t,i._id)):a.showError(i)},a.handleHttpError)},getListData:k,suffixCleanId:h,setData:b,setUpSelectOptions:function(e,t,n,r,a){var o=n[t.options]=[],l=n[t.ids]=[];s.getSchema(e).then(function(s){var c=s.data,d=[];a("Lookup "+e,c,null,d,"",!1,n,r);var u;u="undefined"!=typeof t.filter&&t.filter?i.getPagedAndFilteredList(e,t.filter):i.getAll(e),u.then(function(e){var a=e.data;if(a){for(var i=0;i<a.length;i++){for(var s="",c=0;c<d.length;c++)s+=a[i][d[c].name]+" ";s=s.trim();var u=_.sortedIndex(o,s);o[u]===s&&(s=s+"    ("+a[i]._id+")",u=_.sortedIndex(o,s)),o.splice(u,0,s),l.splice(u,0,a[i]._id)}w(t,n,r)}})})},preservePristine:S,convertToMongoModel:function e(t,n,r,a,o){function i(e,t){var n;return t&&t.fngajax?e&&(n=e.id||e):e&&(n=e.text||(e.x?e.x.text:e)),n}for(var s=0;s<t.length;s++){var l=t[s].name.slice(r),d=k(n,l);if(t[s].schema){if(d)for(var f=0;f<d.length;f++)d[f]=e(t[s].schema,d[f],r+1+l.length,a,l)}else{if(t[s].array&&x(t[s])&&d)for(var p=0;p<d.length;p++)d[p]=d[p].x;var v=a[h(t[s],"_ids")],g=void 0;if(v&&v.length>0)c(l,n,function(e){return m(t[s],e,a[h(t[s],"Options")],v)});else if(g=u(a,l,o)){var w,C=y(n,l,null);if(t[s].array){if(w=[],C)for(var $=0;$<C.length;$++)w[$]=i(C[$],g)}else w=i(C,g);b(n,l,null,w)}}}return n},convertIdToListValue:D,handleError:v,decorateScope:function(e,r,i,s){e.handleHttpError=v(e),e.cancel=function(){angular.copy(s.master,e.record),e.$broadcast("fngCancel",e),a(e.setPristine)},e.$on("showErrorMessage",function(t,n){e.showError(n.body,n.title)}),e.showError=function(t,n){e.alertTitle=n?n:"Error!",e.errorMessage=t},e.dismissError=function(){delete e.errorMessage,delete e.alertTitle},e.save=function(t){t=t||{};var n=i.convertToMongoModel(e.formSchema,angular.copy(e.record),0,e);e.id?"function"==typeof e.dataEventFunctions.onBeforeUpdate?e.dataEventFunctions.onBeforeUpdate(n,s.master,function(r){r?e.showError(r):i.updateDocument(n,t,e,s)}):i.updateDocument(n,t,e,s):"function"==typeof e.dataEventFunctions.onBeforeCreate?e.dataEventFunctions.onBeforeCreate(n,function(r){r?e.showError(r):i.createNew(n,t,e)}):i.createNew(n,t,e)},e.newClick=function(){o.redirectTo()("new",e,t)},e.$on("$locationChangeStart",function(t,a){if(!s.allowLocationChange&&!e.isCancelDisabled()){t.preventDefault();var o=r.open({template:'<div class="modal-header">   <h3>Record modified</h3></div><div class="modal-body">   <p>Would you like to save your changes?</p></div><div class="modal-footer">    <button class="btn btn-primary dlg-yes" ng-click="yes()">Yes</button>    <button class="btn btn-warning dlg-no" ng-click="no()">No</button>    <button class="btn dlg-cancel" ng-click="cancel()">Cancel</button></div>',controller:"SaveChangesModalCtrl",backdrop:"static"});o.result.then(function(t){t?e.save({redirect:a,allowChange:!0}):(s.allowLocationChange=!0,n.location=a)})}}),e.deleteClick=function(){if(e.record._id){var t=r.open({template:'<div class="modal-header">   <h3>Delete Item</h3></div><div class="modal-body">   <p>Are you sure you want to delete this record?</p></div><div class="modal-footer">    <button class="btn btn-primary dlg-no" ng-click="cancel()">No</button>    <button class="btn btn-warning dlg-yes" ng-click="yes()">Yes</button></div>',controller:"SaveChangesModalCtrl",backdrop:"static"});t.result.then(function(t){t&&("function"==typeof e.dataEventFunctions.onBeforeDelete?e.dataEventFunctions.onBeforeDelete(s.master,function(t){t?e.showError(t):i.deleteRecord(e.modelName,e.id,e,s)}):i.deleteRecord(e.modelName,e.id,e,s))})}},e.isCancelDisabled=function(){return"function"==typeof e.disableFunctions.isCancelDisabled?e.disableFunctions.isCancelDisabled(e.record,s.master,e[e.topLevelFormName]):e[e.topLevelFormName]&&e[e.topLevelFormName].$pristine},e.isSaveDisabled=function(){return"function"==typeof e.disableFunctions.isSaveDisabled?e.disableFunctions.isSaveDisabled(e.record,s.master,e[e.topLevelFormName]):e[e.topLevelFormName]&&(e[e.topLevelFormName].$invalid||e[e.topLevelFormName].$pristine)},e.isDeleteDisabled=function(){return"function"==typeof e.disableFunctions.isDeleteDisabled?e.disableFunctions.isDeleteDisabled(e.record,s.master,e[e.topLevelFormName]):!e.id},e.isNewDisabled=function(){return"function"==typeof e.disableFunctions.isNewDisabled&&e.disableFunctions.isNewDisabled(e.record,s.master,e[e.topLevelFormName])},e.disabledText=function(t){var n="";return e.isSaveDisabled&&(n="This button is only enabled when the form is complete and valid.  Make sure all required inputs are filled in. "+t),n},e.getVal=function(t,n){if(t.indexOf("$index")===-1||"undefined"!=typeof n)return t=t.replace(/\$index/g,n),e.$eval("record."+t)}},fillFormFromBackendCustomSchema:p,fillFormWithBackendSchema:function(e,t,n,r){s.getSchema(e.modelName,e.formName).then(function(a){var o=a.data;p(o,e,t,n,r)},e.handleHttpError)}}}t.$inject=["$http","$location","$window","$filter","$timeout","routingService","SubmissionsService","SchemasService"],e.recordHandler=t}(t=e.services||(e.services={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(e){return{getSchema:function(t,n){return e.get("/api/schema/"+t+(n?"/"+n:""),{cache:!0})}}}t.$inject=["$http"],e.SchemasService=t}(t=e.services||(e.services={}))}(fng||(fng={}));var fng;!function(e){var t;!function(e){function t(e,t){var n=function(e){var t="",n=function(e,n){void 0!==n&&""!==n&&("object"==typeof n&&(n=JSON.stringify(n)),""===t?t="?":t+="&",t+=e+"="+n)};return n("l",e.limit),n("f",e.find),n("a",e.aggregate),n("o",e.order),n("s",e.skip),t};return{getListAttributes:function(t,n){return e.get("/api/"+t+"/"+n+"/list")},readRecord:function(t,n){return e.get("/api/"+t+"/"+n)},getAll:function(t,n){var r=angular.extend({cache:!0},n);return e.get("/api/"+t,r)},getPagedAndFilteredList:function(t,r){return e.get("/api/"+t+n(r))},deleteRecord:function(t,n){return e.delete("/api/"+t+"/"+n)},updateRecord:function(n,r,a){return t.get("$http").remove("/api/"+n),e.post("/api/"+n+"/"+r,a)},createRecord:function(n,r){return t.get("$http").remove("/api/"+n),e.post("/api/"+n,r)}}}t.$inject=["$http","$cacheFactory"],e.SubmissionsService=t}(t=e.services||(e.services={}))}(fng||(fng={}));var fng;!function(e){e.formsAngular=angular.module("formsAngular",["ngSanitize","ngMessages","ui.bootstrap","infinite-scroll","monospaced.elastic"]).controller("BaseCtrl",e.controllers.BaseCtrl).controller("SaveChangesModalCtrl",e.controllers.SaveChangesModalCtrl).controller("ModelCtrl",e.controllers.ModelCtrl).controller("NavCtrl",e.controllers.NavCtrl).directive("modelControllerDropdown",e.directives.modelControllerDropdown).directive("errorDisplay",e.directives.errorDisplay).directive("fngLink",e.directives.fngLink).directive("formInput",e.directives.formInput).directive("formButtons",e.directives.formButtons).directive("globalSearch",e.directives.globalSearch).filter("camelCase",e.filters.camelCase).filter("titleCase",e.filters.titleCase).service("addAllService",e.services.addAllService).provider("cssFrameworkService",e.services.cssFrameworkService).provider("routingService",e.services.routingService).factory("$data",e.services.$data).factory("formGenerator",e.services.formGenerator).factory("formMarkupHelper",e.services.formMarkupHelper).factory("inputSizeHelper",e.services.inputSizeHelper).factory("pluginHelper",e.services.pluginHelper).factory("recordHandler",e.services.recordHandler).factory("SchemasService",e.services.SchemasService).factory("SubmissionsService",e.services.SubmissionsService)}(fng||(fng={}));var formsAngular=fng.formsAngular;angular.module("formsAngular").run(["$templateCache",function(e){e.put("base-analysis.html",'<div ng-controller="AnalysisCtrl">\n  <div class="container-fluid page-header report-header">\n    <div ng-class="css(\'rowFluid\')">\n      <div class="header-lhs col-xs-7 span7">\n        <h1>{{ reportSchema.title }}</h1>\n      </div>\n      <div class="header-rhs col-xs-5 span5">\n        <form-input schema="paramSchema" name="paramForm" ng-show="paramSchema" formstyle="horizontalCompact"></form-input>\n      </div>\n    </div>\n  </div>\n  <div class="container-fluid page-body report-body">\n    <error-display></error-display>\n    <div class="row-fluid">\n      <div class="gridStyle" ui-grid="gridOptions" ui-grid-selection></div>\n    </div>\n  </div>\n</div>\n'),e.put("base-edit.html",'<div ng-controller="BaseCtrl">\n    <div ng-class="css(\'rowFluid\')" class="page-header edit-header">\n        <div class="header-lhs col-sm-8 span8">\n            <h4>{{modelNameDisplay}} :\n                <span ng-repeat="field in listSchema">{{getListData(record, field.name)}} </span>\n            </h4>\n        </div>\n        <div class="header-rhs col-sm-2 span2">\n            <div form-buttons></div>\n        </div>\n    </div>\n    <div class="container-fluid page-body edit-body">\n        <error-display></error-display>\n        <form-input name="baseForm" schema="baseSchema()" formstyle="compact"></form-input>\n    </div>\n</div>\n'),e.put("base-list.html",'<div ng-controller="BaseCtrl">\n    <div ng-class="css(\'rowFluid\')" class="page-header list-header">\n        <div class="header-lhs col-sm-8 span8">\n            <h1>{{modelNameDisplay}}</h1>\n        </div>\n        <div class="header-rhs col-sm-2 span2">\n            <a ng-href="{{generateNewUrl()}}"><button id="newBtn" class="btn btn-default"><i class="icon-plus"></i> New</button></a>\n        </div>\n    </div>\n    <div class="page-body list-body">\n        <error-display></error-display>\n        <div ng-class="css(\'rowFluid\')" infinite-scroll="scrollTheList()">\n            <a ng-repeat="record in recordList" ng-href="{{generateEditUrl(record)}}">\n                <div class="list-item">\n                    <div ng-class="css(\'span\',12/listSchema.length)" ng-repeat="field in listSchema">{{getListData(record, field.name)}} </div>\n                </div>\n            </a>\n        </div>\n    </div>\n</div>\n'),e.put("error-messages.html",'<div ng-message="required">A value is required for this field</div>\n<div ng-message="minlength">Too few characters entered</div>\n<div ng-message="maxlength">Too many characters entered</div>\n<div ng-message="min">That value is too small</div>\n<div ng-message="max">That value is too large</div>\n<div ng-message="email">You need to enter a valid email address</div>\n<div ng-message="pattern">This field does not match the expected pattern</div>\n'),e.put("form-button-bs2.html",'<div class="form-btn-grp">\n  <div class="btn-group pull-right">\n    <button id="saveButton" class="btn btn-mini btn-primary form-btn" ng-click="save()" ng-disabled="isSaveDisabled()"><i class="icon-ok"></i> Save</button>\n    <button id="cancelButton" class="btn btn-mini btn-warning form-btn" ng-click="cancel()" ng-disabled="isCancelDisabled()"><i class="icon-remove"></i> Cancel</button>\n  </div>\n  <div class="btn-group pull-right">\n    <button id="newButton" class="btn btn-mini btn-success form-btn" ng-click="newClick()" ng-disabled="isNewDisabled()"><i class="icon-plus"></i> New</button>\n    <button id="deleteButton" class="btn btn-mini btn-danger form-btn" ng-click="deleteClick()" ng-disabled="isDeleteDisabled()"><i class="icon-minus"></i> Delete</button>\n  </div>\n</div>\n'),e.put("form-button-bs3.html",'<div class="form-btn-grp">\n  <div class="btn-group pull-right">\n    <button id="saveButton" class="btn btn-primary form-btn btn-xs" ng-click="save()" ng-disabled="isSaveDisabled()"><i class="glyphicon glyphicon-ok"></i> Save</button>\n    <button id="cancelButton" class="btn btn-warning form-btn btn-xs" ng-click="cancel()" ng-disabled="isCancelDisabled()"><i class="glyphicon glyphicon-remove"></i> Cancel</button>\n  </div>\n  <div class="btn-group pull-right">\n    <button id="newButton" class="btn btn-success form-btn btn-xs" ng-click="newClick()" ng-disabled="isNewDisabled()"><i class="glyphicon glyphicon-plus"></i> New</button>\n    <button id="deleteButton" class="btn btn-danger form-btn btn-xs" ng-click="deleteClick()" ng-disabled="isDeleteDisabled()"><i class="glyphicon glyphicon-minus"></i> Delete</button>\n  </div>\n</div>\n'),e.put("search-bs2.html",'<form class="navbar-search pull-right">\n    <div id="search-cg" class="control-group" ng-class="errorClass">\n        <input type="text" autocomplete="off" id="searchinput" ng-model="searchTarget" ng-model-options="{debounce:250}" class="search-query" placeholder="{{searchPlaceholder}}" ng-keyup="handleKey($event)">\n    </div>\n</form>\n<div class="results-container" ng-show="results.length >= 1">\n    <div class="search-results">\n        <div ng-repeat="result in results">\n            <span ng-class="resultClass($index)" ng-click="selectResult($index)">{{result.resourceText}} {{result.text}}</span>\n        </div>\n        <div ng-show="moreCount > 0">(plus more - continue typing to narrow down search...)\n        </div>\n    </div>\n</div>\n'),e.put("search-bs3.html",'<form class="pull-right navbar-form">\n    <div id="search-cg" class="form-group" ng-class="errorClass">\n        <input type="text" autocomplete="off" id="searchinput" ng-model="searchTarget" ng-model-options="{debounce:250}" class="search-query form-control" placeholder="{{searchPlaceholder}}" ng-keyup="handleKey($event)">\n    </div>\n</form>\n<div class="results-container" ng-show="results.length >= 1">\n    <div class="search-results">\n        <div ng-repeat="result in results">\n            <span ng-class="resultClass($index)" ng-click="selectResult($index)" title={{result.additional}}>{{result.resourceText}} {{result.text}}</span>\n        </div>\n        <div ng-show="moreCount > 0">(plus more - continue typing to narrow down search...)\n        </div>\n    </div>\n</div>\n')}]);